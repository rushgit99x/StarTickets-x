@model StarTickets.Models.Event
@{
    ViewData["Title"] = "Delete Event";
    Layout = "~/Views/Shared/CustomLayouts/_EventManagement.cshtml";
}
<div class="delete-event-container">
    <h2 class="text-danger">
        <i class="fas fa-calendar-times"></i> Delete Event
    </h2>
    <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle"></i>
        Are you sure you want to delete the event <strong>@Model.EventName</strong>?
        <br><small class="text-muted">This action cannot be undone.</small>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Event Name</dt>
                <dd class="col-sm-9">@Model.EventName</dd>

                <dt class="col-sm-3">Event Date</dt>
                <dd class="col-sm-9">@Model.EventDate.ToString("dddd, MMMM dd, yyyy 'at' hh:mm tt")</dd>

                @if (Model.EndDate.HasValue)
                {
                    <dt class="col-sm-3">End Date</dt>
                    <dd class="col-sm-9">@Model.EndDate.Value.ToString("dddd, MMMM dd, yyyy 'at' hh:mm tt")</dd>
                }

                <dt class="col-sm-3">Venue</dt>
                <dd class="col-sm-9">@(Model.Venue?.VenueName ?? "N/A")</dd>

                <dt class="col-sm-3">Organizer</dt>
                <dd class="col-sm-9">@(Model.Organizer?.FirstName + " " + Model.Organizer?.LastName ?? "N/A")</dd>

                <dt class="col-sm-3">Category</dt>
                <dd class="col-sm-9">@(Model.Category?.CategoryName ?? "N/A")</dd>

                @if (!string.IsNullOrEmpty(Model.BandName))
                {
                    <dt class="col-sm-3">Band/Artist</dt>
                    <dd class="col-sm-9">@Model.BandName</dd>
                }

                @if (!string.IsNullOrEmpty(Model.Performer))
                {
                    <dt class="col-sm-3">Performer</dt>
                    <dd class="col-sm-9">@Model.Performer</dd>
                }

                <dt class="col-sm-3">Status</dt>
                <dd class="col-sm-9">
                    <span class="badge badge-@(Model.Status == StarTickets.Models.EventStatus.Published ? "success" :
                                                                       Model.Status == StarTickets.Models.EventStatus.Draft ? "secondary" :
                                                                       Model.Status == StarTickets.Models.EventStatus.Cancelled ? "danger" : "warning")">
                        @Model.Status
                    </span>
                </dd>

                <dt class="col-sm-3">Active</dt>
                <dd class="col-sm-9">
                    <span class="badge badge-@(Model.IsActive ? "success" : "secondary")">
                        @(Model.IsActive ? "Yes" : "No")
                    </span>
                </dd>

                @if (Model.TicketCategories?.Any() == true)
                {
                    <dt class="col-sm-3">Ticket Categories</dt>
                    <dd class="col-sm-9">
                        <div class="ticket-categories">
                            @foreach (var ticket in Model.TicketCategories)
                            {
                                <div class="mb-2">
                                    <strong>@ticket.CategoryName</strong> -
                                    @ticket.Price.ToString("C")
                                    (@ticket.TotalQuantity tickets)
                                </div>
                            }
                        </div>
                    </dd>
                }
            </dl>
        </div>
    </div>

    @if (Model.Bookings?.Any() == true)
    {
        <div class="alert alert-danger">
            <i class="fas fa-ban"></i>
            <strong>Cannot delete this event!</strong> This event has existing bookings and cannot be deleted.
            <br><small>Consider changing the status to 'Cancelled' instead.</small>
        </div>
        <div class="mt-3">
            <a asp-action="Index" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Events
            </a>
        </div>
    }
    else
    {
        <form asp-action="DeleteConfirmed" asp-route-id="@Model.EventId" method="post" onsubmit="return confirm('Are you absolutely sure you want to delete this event? This action cannot be undone.');">
            @Html.AntiForgeryToken()
            <div class="mt-3">
                <button type="submit" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Delete Event
                </button>
                <a asp-action="Index" class="btn btn-secondary ml-2">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>
    }
</div>

<style>
    .delete-event-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    .ticket-categories .mb-2 {
        padding: 8px 12px;
        background-color: #f8f9fa;
        border-left: 3px solid #007bff;
        border-radius: 4px;
    }

    .alert-warning {
        border: 1px solid #ffeaa7;
        background-color: #fef5e7;
    }

    .alert-danger {
        border: 1px solid #ff7675;
        background-color: #ffeae9;
    }

    .card {
        border: 1px solid #dee2e6;
        border-radius: 8px;
    }

    .badge {
        font-size: 0.875em;
        padding: 0.375em 0.75em;
    }

    .badge-success {
        background-color: #28a745;
    }

    .badge-secondary {
        background-color: #6c757d;
    }

    .badge-danger {
        background-color: #dc3545;
    }

    .badge-warning {
        background-color: #ffc107;
        color: #212529;
    }
</style>